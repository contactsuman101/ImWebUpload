<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width", initial-scale="1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Firebase storage</title>

</head>
<body>
    <input type="file" id="photo">
    <img id="image"/>
    <button onclick="uploadImage()">Upload Image</button>

    <video id="video" width="400" height="400" autoplay controls playsinline></video>
    <button id="snap">Capture</button>
    <canvas id="canvas" width="640" height="480"></canvas>
</body>
<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-storage.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.0.1/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyC2rPXw4c-u4WZ6ifwbvcTp_6PcuJtp0pA",
    authDomain: "idoit-f9704.firebaseapp.com",
    databaseURL: "https://idoit-f9704.firebaseio.com",
    projectId: "idoit-f9704",
    storageBucket: "idoit-f9704.appspot.com",
    messagingSenderId: "951119291775",
    appId: "1:951119291775:web:79af859bf3b64a1baea64a",
    measurementId: "G-R2E1TQFGFC"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();
  console.log(firebase)

  function uploadImage(){
      const ref=firebase.storage().ref();
      const file=document.querySelector("#photo").files[0]
      const name=new Date()+'-'+file.name
      const metadata={
          contentType:file.type
      }
      const task=ref.child(name).put(file,metadata)
      task.
      then(snapshot=>snapshot.ref.getDownloadURL())
      then(url=>{
          console.log(url)
          alert("Image Upload successful")
          const image=document.querySelector('#image')
          image.src=url
      })

  }
  //webcam code
  const video=document.getElementById('video')
  const canvas=document.getElementById('canvas')
  const snap=document.getElementById('snap')

  const constraints={
      audio:false,
      video:{
          width:400,height:400
      }
  }

//   //starrt webcam
  


  init()
</script>
</html>